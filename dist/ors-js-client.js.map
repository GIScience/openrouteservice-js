{"version":3,"file":"ors-js-client.js","sources":["../src/constants.js","../src/OrsUtil.js","../src/OrsInput.js","../src/OrsBase.js","../src/OrsGeocode.js","../src/OrsIsochrones.js","../src/OrsMatrix.js","../src/OrsDirections.js","../src/OrsPois.js","../src/OrsElevation.js","../src/OrsOptimization.js","../src/index.js"],"sourcesContent":["const constants = {\n  defaultAPIVersion: 'v2',\n  defaultHost: 'https://api.openrouteservice.org',\n  missingAPIKeyMsg: 'Please add your openrouteservice api_key..',\n  useAPIV2Msg: 'Please use ORS API v2',\n  baseUrlConstituents: ['host', 'service', 'api_version', 'mime_type'],\n  propNames: {\n    apiKey: 'api_key',\n    host: 'host',\n    service: 'service',\n    apiVersion: 'api_version',\n    mimeType: 'mime_type',\n    profile: 'profile',\n    format: 'format',\n    timeout: 'timeout'\n  }\n}\n\nexport default constants\n","import Constants from './constants.js'\nclass OrsUtil {\n  fillArgs(defaultArgs, requestArgs) {\n    requestArgs = {...defaultArgs, ...requestArgs}\n    return requestArgs\n  }\n\n  saveArgsToCache(args) {\n    return {\n      host: args[Constants.propNames.host],\n      api_version: args[Constants.propNames.apiVersion],\n      profile: args[Constants.propNames.profile],\n      format: args[Constants.propNames.format],\n      service: args[Constants.propNames.service],\n      api_key: args[Constants.propNames.apiKey],\n      mime_type: args[Constants.propNames.mimeType]\n    }\n  }\n\n  prepareRequest(args) {\n    delete args[Constants.propNames.mimeType]\n    delete args[Constants.propNames.host]\n    delete args[Constants.propNames.apiVersion]\n    delete args[Constants.propNames.service]\n    delete args[Constants.propNames.apiKey]\n    delete args[Constants.propNames.profile]\n    delete args[Constants.propNames.format]\n    delete args[Constants.propNames.timeout]\n    return { ...args }\n  }\n\n  /**\n   * Prepare the request url based on url constituents\n   * @param {Object} args\n   * @return {string} url\n   */\n  prepareUrl(args) {\n    let url = args[Constants.propNames.host]\n    let urlPathParts = [\n      args[Constants.propNames.apiVersion],\n      args[Constants.propNames.service],\n      args[Constants.propNames.profile],\n      args[Constants.propNames.format]\n    ]\n\n    urlPathParts = urlPathParts.join('/')\n    urlPathParts = urlPathParts.replace(/\\/(\\/)+/g, '/')\n\n    // The beginning and end of urlPathParts can not be a slash\n    if (urlPathParts[0] === '/') {\n      urlPathParts = urlPathParts.slice(1)\n    }\n    let end = urlPathParts.slice(-1)\n    if (end[0] === '/') {\n      urlPathParts = urlPathParts.slice(0, -1)\n    }\n\n    url = url + '/' + urlPathParts\n\n    return url\n  }\n}\n\nexport default OrsUtil\n","class OrsInput {\n  constructor(input, input2) {\n    this.setCoord(input, input2)\n  }\n\n  round(val, precision) {\n    if (precision === undefined) precision = 1e6\n    return Math.round(val * precision) / precision\n  }\n\n  setCoord(lat, lng) {\n    this.coord = [this.round(lat), this.round(lng)]\n  }\n}\n\nexport default OrsInput\n","import OrsUtil from './OrsUtil.js'\nimport Constants from './constants.js'\n\nconst orsUtil = new OrsUtil()\n\nclass OrsBase {\n  constructor(args) {\n    this.defaultArgs = {}\n    this.requestArgs = {}\n    this.argsCache = null\n    this.customHeaders = {}\n\n    this._setRequestDefaults(args)\n  }\n\n  /**\n   * Set defaults for a request comparing with and overwriting default class arguments\n   * @param {Object} args - constructor input\n   */\n  _setRequestDefaults(args) {\n    this.defaultArgs[Constants.propNames.host] = Constants.defaultHost\n    if (args[Constants.propNames.host]) {\n      this.defaultArgs[Constants.propNames.host] = args[Constants.propNames.host]\n    }\n    if (args[Constants.propNames.service]) {\n      this.defaultArgs[Constants.propNames.service] = args[Constants.propNames.service]\n    }\n    if (Constants.propNames.apiKey in args) {\n      this.defaultArgs[Constants.propNames.apiKey] = args[Constants.propNames.apiKey]\n    } else {\n      // eslint-disable-next-line no-console\n      console.error(Constants.missingAPIKeyMsg)\n      throw new Error(Constants.missingAPIKeyMsg)\n    }\n\n  }\n\n  checkHeaders() {\n    // Get custom header and remove from args\n    if (this.requestArgs.customHeaders) {\n      this.customHeaders = this.requestArgs.customHeaders\n      delete this.requestArgs.customHeaders\n    }\n    // set default Content-type, since Postman sets Content-type to text/plain if not specified\n    if (!('Content-type' in this.customHeaders)) {\n      this.customHeaders = {...this.customHeaders, 'Content-type': 'application/json'}\n    }\n  }\n\n  async createRequest(body) {\n\n    let url = orsUtil.prepareUrl(this.argsCache)\n    if (this.argsCache[Constants.propNames.service] === 'pois') {\n      url += url.indexOf('?') > -1 ? '&' : '?'\n    }\n\n    const authorization = { 'Authorization': this.argsCache[Constants.propNames.apiKey]}\n    const controller = new AbortController()\n    const timeout = setTimeout(() => controller.abort('timed out'), this.defaultArgs[Constants.propNames.timeout] || 5000)\n\n    try {\n      const orsRequest = await fetch(url, {\n        method: 'POST',\n        body: JSON.stringify(body),\n        headers: {...authorization, ...this.customHeaders},\n        signal: controller.signal\n      })\n\n      if (!orsRequest.ok) {\n        throw {\n          status: orsRequest.status,\n          message: orsRequest.statusText\n        }\n      }\n      return await orsRequest.json() || orsRequest.text\n    } catch (err) {\n      const error = new Error(err.message)\n      error.status = err.status\n\n      console.error(error)\n      throw error\n    } finally {\n      clearTimeout(timeout)\n    }\n  }\n\n  // is overidden in Directions and Isochrones class\n  getBody() {\n    return this.httpArgs;\n  }\n\n  async calculate(reqArgs) {\n    this.requestArgs = reqArgs\n\n    this.checkHeaders()\n\n    this.requestArgs = orsUtil.fillArgs(this.defaultArgs, this.requestArgs)\n\n    if (this.requestArgs[Constants.propNames.apiVersion] === Constants.defaultAPIVersion) {\n      this.argsCache = orsUtil.saveArgsToCache(this.requestArgs)\n\n      this.httpArgs = orsUtil.prepareRequest(this.requestArgs)\n      const postBody = this.getBody(this.httpArgs)\n\n      return await this.createRequest(postBody)\n    } else {\n      // eslint-disable-next-line no-console\n      console.error(Constants.useAPIV2Msg)\n    }\n  }\n}\n\nexport default OrsBase\n","import OrsUtil from './OrsUtil.js'\nimport Constants from './constants.js'\nimport OrsBase from './OrsBase.js'\n\nconst orsUtil = new OrsUtil()\n\nclass OrsGeocode extends OrsBase {\n  constructor(args) {\n    super(args)\n\n    this.lookupParameter = {\n      api_key: function (key, val) {\n        return key + '=' + val\n      },\n      text: function (key, val) {\n        return '&' + key + '=' + encodeURIComponent(val)\n      },\n      focus_point: function (key, val) {\n        let urlParams = ''\n        urlParams += '&' + 'focus.point.lon' + '=' + val[1]\n        urlParams += '&' + 'focus.point.lat' + '=' + val[0]\n        return urlParams\n      },\n      boundary_bbox: function (key, val) {\n        let urlParams = ''\n        urlParams += '&' + 'boundary.rect.min_lon' + '=' + val[0][1]\n        urlParams += '&' + 'boundary.rect.min_lat' + '=' + val[0][0]\n        urlParams += '&' + 'boundary.rect.max_lon' + '=' + val[1][1]\n        urlParams += '&' + 'boundary.rect.max_lat' + '=' + val[1][0]\n\n        return urlParams\n      },\n      point: function (key, val) {\n        if (val && Array.isArray(val.lat_lng)) {\n          let urlParams = ''\n          urlParams += '&' + 'point.lon' + '=' + val.lat_lng[1]\n          urlParams += '&' + 'point.lat' + '=' + val.lat_lng[0]\n          return urlParams\n        }\n      },\n      boundary_circle: function (key, val) {\n        let urlParams = ''\n        urlParams += '&' + 'boundary.circle.lon' + '=' + val.lat_lng[1]\n        urlParams += '&' + 'boundary.circle.lat' + '=' + val.lat_lng[0]\n        urlParams += '&' + 'boundary.circle.radius' + '=' + val.radius\n\n        return urlParams\n      },\n      sources: function (key, val) {\n        let urlParams = '&sources='\n        if (val) {\n          for (const key in val) {\n            if (Number(key) > 0) {\n              urlParams += ','\n            }\n            urlParams += val[key]\n          }\n          return urlParams\n        }\n      },\n      layers: function (key, val) {\n        let urlParams = '&layers='\n        let counter = 0\n        for (key in val) {\n          if (counter > 0) {\n            urlParams += ','\n          }\n          urlParams += val[key]\n          counter++\n        }\n        return urlParams\n      },\n      boundary_country: function (key, val) {\n        return '&' + 'boundary.country' + '=' + val\n      },\n      size: function (key, val) {\n        return '&' + key + '=' + val\n      },\n      address: function (key, val) {\n        return '&' + key + '=' + val\n      },\n      neighbourhood: function (key, val) {\n        return '&' + key + '=' + val\n      },\n      borough: function (key, val) {\n        return '&' + key + '=' + val\n      },\n      locality: function (key, val) {\n        return '&' + key + '=' + val\n      },\n      county: function (key, val) {\n        return '&' + key + '=' + val\n      },\n      region: function (key, val) {\n        return '&' + key + '=' + val\n      },\n      postalcode: function (key, val) {\n        return '&' + key + '=' + val\n      },\n      country: function (key, val) {\n        return '&' + key + '=' + val\n      }\n    }\n  }\n\n  getParametersAsQueryString(args) {\n    let queryString = ''\n    for (const key in args) {\n      const val = args[key]\n      if (Constants.baseUrlConstituents.indexOf(key) <= -1) {\n        queryString += this.lookupParameter[key](key, val)\n      }\n    }\n    return queryString\n  }\n\n  async geocodePromise() {\n    // Use old API via GET\n    let url = orsUtil.prepareUrl(this.requestArgs)\n    // Add url query string from args\n    url += '?' + this.getParametersAsQueryString(this.requestArgs)\n\n    const controller = new AbortController()\n    const timeout = setTimeout(() => controller.abort('timed out'), this.defaultArgs[Constants.propNames.timeout] || 5000)\n\n    try {\n      // createRequest function from base class is not applicable: GET instead of POST request\n      const orsRequest = await fetch(url, {\n        method: 'GET',\n        headers: this.customHeaders,\n        signal: controller.signal\n      })\n\n      if (!orsRequest.ok) {\n        throw {\n          status: orsRequest.status,\n          message: orsRequest.statusText\n        }\n      }\n      return await orsRequest.json() || orsRequest.text\n    } catch (err) {\n      const error = new Error(err.message)\n      error.status = err.status\n\n      console.error(error)\n      throw error\n    } finally {\n      clearTimeout(timeout)\n    }\n  }\n\n  async geocode(reqArgs) {\n    this.requestArgs = reqArgs\n\n    this.checkHeaders()\n\n    if (!this.defaultArgs[Constants.propNames.service] && !this.requestArgs[Constants.propNames.service]) {\n      this.requestArgs.service = 'geocode/search'\n    }\n    this.requestArgs = orsUtil.fillArgs(this.defaultArgs, this.requestArgs)\n\n    return await this.geocodePromise()\n  }\n\n  async reverseGeocode(reqArgs) {\n    this.requestArgs = reqArgs\n\n    this.checkHeaders()\n\n    if (!this.defaultArgs[Constants.propNames.service] && !this.requestArgs[Constants.propNames.service]) {\n      this.requestArgs.service = 'geocode/reverse'\n    }\n    this.requestArgs = orsUtil.fillArgs(this.defaultArgs, this.requestArgs)\n\n    return await this.geocodePromise()\n  }\n\n  async structuredGeocode(reqArgs) {\n    this.requestArgs = reqArgs\n\n    this.checkHeaders()\n\n    if (!this.defaultArgs[Constants.propNames.service] && !this.requestArgs[Constants.propNames.service]) {\n      this.requestArgs.service = 'geocode/search/structured'\n    }\n    this.requestArgs = orsUtil.fillArgs(this.defaultArgs, this.requestArgs)\n\n    return await this.geocodePromise()\n  }\n}\n\nexport default OrsGeocode\n","import Constants from './constants.js'\nimport OrsBase from './OrsBase.js'\n\nclass OrsIsochrones extends OrsBase {\n  constructor(args) {\n    super(args);\n    if (!this.defaultArgs[Constants.propNames.service] && !this.requestArgs[Constants.propNames.service]) {\n      this.defaultArgs.service = 'isochrones'\n    }\n    if (!args[Constants.propNames.apiVersion]) {\n      this.defaultArgs.api_version = Constants.defaultAPIVersion\n    }\n  }\n\n  getBody(args) {\n    const options = {}\n\n    if (args.restrictions) {\n      options.profile_params = {\n        restrictions: {\n          ...args.restrictions\n        }\n      }\n      delete args.restrictions\n    }\n    if (args.avoidables) {\n      options.avoid_features = [...args.avoidables]\n      delete args.avoidables\n    }\n\n    if (args.avoid_polygons) {\n      options.avoid_polygons = {\n        ...args.avoid_polygons\n      }\n      delete args.avoid_polygons\n    }\n\n    if (Object.keys(options).length > 0) {\n      return {\n        ...args,\n        options: options\n      }\n    } else {\n      return {\n        ...args\n      }\n    }\n  }\n}\n\nexport default OrsIsochrones\n","import Constants from './constants.js'\nimport OrsBase from './OrsBase.js'\n\nclass OrsMatrix extends OrsBase {\n  constructor(args) {\n    super(args);\n    if (!this.defaultArgs[Constants.propNames.service] && !this.requestArgs[Constants.propNames.service]) {\n      this.defaultArgs[Constants.propNames.service] = 'matrix'\n    }\n    if (!args[Constants.propNames.apiVersion]) {\n      this.defaultArgs.api_version = Constants.defaultAPIVersion\n    }\n  }\n}\n\nexport default OrsMatrix\n","import Constants from './constants.js'\nimport OrsBase from './OrsBase.js'\n\nclass OrsDirections extends OrsBase {\n  constructor(args) {\n    super(args);\n    if (!this.defaultArgs[Constants.propNames.service]) {\n      this.defaultArgs[Constants.propNames.service] = 'directions'\n    }\n    if (!args[Constants.propNames.apiVersion]) {\n      this.defaultArgs.api_version = Constants.defaultAPIVersion\n    }\n  }\n\n  getBody(args) {\n    if (args.options && typeof args.options !== 'object') {\n      args.options = JSON.parse(args.options)\n    }\n\n    if (args.restrictions) {\n      args.options = args.options || {}\n      args.options.profile_params = {\n        restrictions: { ...args.restrictions }\n      }\n      delete args.restrictions\n    }\n\n    if (args.avoidables) {\n      args.options = args.options || {}\n      args.options.avoid_features = [...args.avoidables]\n      delete args.avoidables\n    }\n    return args\n  }\n}\n\nexport default OrsDirections\n","import OrsUtil from './OrsUtil.js'\nimport Constants from './constants.js'\nimport OrsBase from './OrsBase.js'\n\nconst orsUtil = new OrsUtil()\n\nclass OrsPois extends OrsBase {\n  constructor(args) {\n    super(args);\n    if (!this.defaultArgs[Constants.propNames.service]) {\n      this.defaultArgs[Constants.propNames.service] = 'pois'\n    }\n  }\n\n  generatePayload(args) {\n    const payload = {}\n\n    for (const key in args) {\n      if (\n          !(\n              Constants.baseUrlConstituents.indexOf(key) > -1 ||\n              key === Constants.propNames.apiKey ||\n              key === Constants.propNames.timeout\n          )\n      ) {\n        payload[key] = args[key]\n      }\n    }\n    return payload\n  }\n\n  async poisPromise() {\n    // the request arg is required by the API as part of the body\n    this.requestArgs.request = this.requestArgs.request || 'pois'\n\n    this.argsCache = orsUtil.saveArgsToCache(this.requestArgs)\n\n    if (this.requestArgs[Constants.propNames.service]) {\n      delete this.requestArgs[Constants.propNames.service]\n    }\n\n    const payload = this.generatePayload(this.requestArgs)\n\n    return await this.createRequest(payload)\n  }\n\n  async pois(reqArgs) {\n    this.requestArgs = reqArgs\n\n    this.checkHeaders()\n\n    this.requestArgs = orsUtil.fillArgs(this.defaultArgs, this.requestArgs)\n\n    return await this.poisPromise()\n  }\n}\n\nexport default OrsPois\n","import OrsUtil from './OrsUtil.js'\nimport Constants from './constants.js'\nimport OrsBase from './OrsBase.js'\n\nconst orsUtil = new OrsUtil()\nclass OrsElevation extends OrsBase {\n\n  generatePayload(args) {\n    const payload = {}\n\n    for (const key in args) {\n      if (Constants.baseUrlConstituents.indexOf(key) <= -1) {\n        payload[key] = args[key]\n      }\n    }\n    return payload\n  }\n\n  async elevationPromise() {\n    this.argsCache = orsUtil.saveArgsToCache(this.requestArgs)\n\n    const payload = this.generatePayload(this.requestArgs)\n\n    return await this.createRequest(payload)\n  }\n\n  async lineElevation(reqArgs) {\n    this.requestArgs = reqArgs\n\n    this.checkHeaders()\n\n    if (!this.defaultArgs[Constants.propNames.service] && !this.requestArgs[Constants.propNames.service]) {\n      this.requestArgs[Constants.propNames.service] = 'elevation/line'\n    }\n    this.requestArgs = orsUtil.fillArgs(this.defaultArgs, this.requestArgs)\n\n    return await this.elevationPromise()\n  }\n\n  async pointElevation(reqArgs) {\n    this.requestArgs = reqArgs\n\n    this.checkHeaders()\n\n    if (!this.defaultArgs[Constants.propNames.service] && !this.requestArgs[Constants.propNames.service]) {\n      this.requestArgs[Constants.propNames.service] = 'elevation/point'\n    }\n    this.requestArgs = orsUtil.fillArgs(this.defaultArgs, this.requestArgs)\n\n    return await this.elevationPromise()\n  }\n}\n\nexport default OrsElevation\n","import OrsUtil from \"./OrsUtil.js\"\nimport Constants from \"./constants.js\"\nimport OrsBase from \"./OrsBase.js\"\n\nconst orsUtil = new OrsUtil()\n\nclass OrsOptimization extends OrsBase {\n  generatePayload(args) {\n    let payload = {}\n\n    for (const key in args) {\n      if (Constants.baseUrlConstituents.indexOf(key) <= -1) {\n        payload[key] = args[key]\n      }\n    }\n    return payload\n  }\n\n  async optimizationPromise() {\n    this.argsCache = orsUtil.saveArgsToCache(this.requestArgs)\n\n    const payload = this.generatePayload(this.requestArgs)\n\n    return await this.createRequest(payload)\n  }\n\n  async optimize(reqArgs) {\n    this.requestArgs = reqArgs\n\n    this.checkHeaders()\n\n    if (!this.defaultArgs[Constants.propNames.service] && !reqArgs[Constants.propNames.service]) {\n      reqArgs[Constants.propNames.service] = 'optimization'\n    }\n    this.requestArgs = orsUtil.fillArgs(this.defaultArgs, this.requestArgs)\n\n    return await this.optimizationPromise()\n  }\n}\n\nexport default OrsOptimization\n","import OrsUtil from './OrsUtil.js'\nimport OrsInput from './OrsInput.js'\nimport OrsGeocode from './OrsGeocode.js'\nimport OrsIsochrones from './OrsIsochrones.js'\nimport OrsMatrix from './OrsMatrix.js'\nimport OrsDirections from './OrsDirections.js'\nimport OrsPois from './OrsPois.js'\nimport OrsElevation from './OrsElevation.js'\nimport OrsOptimization from './OrsOptimization.js'\n\nconst Openrouteservice = {\n  Util: OrsUtil,\n  Input: OrsInput,\n  Geocode: OrsGeocode,\n  Isochrones: OrsIsochrones,\n  Directions: OrsDirections,\n  Matrix: OrsMatrix,\n  Pois: OrsPois,\n  Elevation: OrsElevation,\n  Optimization: OrsOptimization\n}\n\n// Define Openrouteservice for Node module pattern loaders, including Browserify\nif (typeof module === 'object' && typeof module.exports === 'object') {\n  module.exports = Openrouteservice\n  // define Openrouteservice as an AMD module\n  // eslint-disable-next-line no-undef\n} else if (typeof define === 'function' && define.amd) {\n  // eslint-disable-next-line no-undef\n  define(Openrouteservice)\n}\n\nif (typeof window !== 'undefined') {\n  window.Openrouteservice = Openrouteservice\n}\n\nexport default Openrouteservice\n"],"names":["Constants","orsUtil","key"],"mappings":"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"}